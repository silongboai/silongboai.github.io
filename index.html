<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no">
    <title>Spanish</title>
    <link href="./css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <script src="./js/vue.js"></script>
    <div id="app" class="container">
        <div class="row">
            <div class="col">
                <select class="form-select" v-model="selectedSpanishIndex">
                    <option :value="-1">--select spanish--</option>
                    <option v-for="(x, index) in spanishList" :key="index" :value="index">{{ x.lang }} - {{ x.name }}</option>
                </select>
            </div>
        </div>

        <div class="row">
            <div class="col">
                <select class="form-select" v-model="selectedWordsListName">
                    <option value="">--select words--</option>
                    <option v-for="(value, key) in allWords" :value="key">{{ key }}</option>
                </select>
            </div>
        </div>

        <div class="row">
            <div class="col">
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="" id="cbShowAnswer" v-model="showAnswer">
                    <label class="form-check-label" for="cbShowAnswer">
                        answer
                    </label>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col">
                <div class="float-end">
                    <button type="button" class="btn btn-primary" @click="getNext">next</button>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col">
                <div class="container text-center">
                    <div class="row">
                        <div class="col">
                            <p @click="readInSpanish" class="fs-1">{{ wordAndAnswer[0]}}</p>
                        </div>
                    </div>
                    <div class="row" v-if="showAnswer">
                        <div class="col">
                            <p class="fs-1">{{ wordAndAnswer[1] }}</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        var app = new Vue({
            el: '#app',
            data: {
                // 所有单词
                allWords: {
                    NumbersOf0To9: [['cero', 'zero'],['uno', 'one'],['dos','two'],['tres','three'],['cuatro','four'],['cinco','five'],['seis','six'],['siete','seven'],['ocho','eight'],['nueve','nine']],
                    NumbersOf10To19: [['diez','ten'],['once','eleven'],['doce','twelve'],['trece','thirteen'],['catorce','fourteen'],['quince','fifteen'],['dieciséis','sixteen'],['diecisiete','seventeen'],['dieciocho','eighteen'],['diecinueve','nineteen']],
                    NumbersOf20To29: [['veinte','twenty'],['veintiuno','21'],['veintidos','22'],['veintitrés','23'], ['veinticuatro','24'],['veinticinco','25'],['veintiseis','26'],['veintisiete','27'],['veintiocho','28'],['veintinueve','29']],
                    NumbersOf30Plush: [['treinta','thirty'],['cuarenta','forty'],['cincuenta','fifty'],['sesenta','sixty'],['setenta','seventy'],['ochenta','eighty'],['noventa','ninety'],['cien','hundred']],
                    DaysOfWeek: [['Lunes','Monday'],['Martes','Tuesday'],['Miércoles','Wednesday'],['Jueves','Thursday'],['Viernes','Friday'],['Sábado','Saturday'],['Domingo','Sunday']],
                    MonthOfYear: [['Enero','January'],['Febrero','February'],['Marzo','March'],['Abril','April'],['Mayo','May'],['Junio','June'],['Julio','July'],['Agosto','August'],['Septiembre','September'],['Octubre','October'],['Noviembre','November'],['Diciembre','December']],
                    Colors: [['rojo','red'],['azul','blue'],['amarillo','yellow'],['anaranjado','orange'],['verde','green'],['morado','purple'],['rosado','pink'],['café','brown'],['negro','black'],['blanco','white'],['gris','grey'],['celeste','sky blue'],['marrón','brown']],
                    // https://www.spanish.academy/blog/1000-most-common-spanish-words-for-beginners/
                    TheEssentials: [
                        ['sí','yes'],
                        ['no','no'],
                        ['¿entiende(s)?','do you understand?'],
                        ['no entiendo','i don’t understand'],
                        ['no (lo) sé','i don’t know'],
                        ['no tengo ni idea','i have no idea'],
                        ['no hablo español','i don’t speak spanish'],
                        ['estoy perdido(a)','i’m lost']
                    ],
                    IntroduceYourself: [
                        ['me llamo','my name is'],
                        ['mi nombre es','my name is'],
                        ['soy…','i’m…'],
                        ['¿cómo te llamas?','what is your name?'],
                        ['(yo) soy de…','i am from…']
                    ],
                    WhatIsUp: [
                        ['¿cómo está usted?','how are you? (formal)'],
                        ['¿cómo estás?','how are you? (informal)'],
                        ['¿qué tal?','how are you? (informal) / what’s up?'],
                        ['¿cómo te va?','how ‘s it going?'],
                        ['¿qué haces?','what are you doing?'],
                        ['¿qué pasa?','what ‘s happening?'],
                    ],
                    Responses: [
                        ['¿y tú?','and you?'],
                        ['muy bien','very well'],
                        ['más o menos','so so'],
                        ['así, así','so, so'],
                        ['mal','bad'],
                        ['como siempre','as always']
                    ],
                    EtiquetteWords: [
                        ['¡de nada!','you’re welcome! / no problem!'],
                        ['por favor','please'],
                        ['¡perdon!','excuse me!'],
                        ['¡disculpe!','excuse me!'],
                        ['¡lo siento!','sorry!'],
                        ['gracias','thank you'],
                        ['salud','bless you']
                    ],
                    QuestionWords: [
                        ['¿qué…?','what?'],
                        ['¿quién…?','who?'],
                        ['¿cuándo…?','when?'],
                        ['¿dónde…?','where?'],
                        ['¿por qué…?','why?'],
                        ['¿cuál?','which?'],
                        ['¿cómo…?','how?']
                    ],
                    SpanishPronouns: [
                        ['Yo','I'],
                        ['tú (informal)','you'],
                        ['usted (formal)','you'],
                        ['él','he'],
                        ['ella','she'],
                        ['nosotros/nosotras','we'],
                        ['ustedes','you all'],
                        ['ellos','they'],
                        ['ellas(females)','they']
                    ],
                    Greetings: [
                        ['hola','hello'],
                        ['buenos días','good morning'],
                        ['buenas tardes','good afternoon'],
                        ['buenas noches','good evening / good night']
                    ],
                    TalkingAboutAge: [
                        ['(yo) tengo … años','i am … years old.'],
                        ['viejo/a','old'],
                        ['joven','young'],
                        ['de mediana edad','middle-aged'],
                        ['juvenil','youthful'],
                        ['nuevo/a','new'],
                    ],
                    Celebrate: [
                        ['¡feliz cumpleaños!','happy birthday!'],
                        ['¡felicitaciones!','congratulations!'],
                        ['¡diviértete!','have fun!'],
                        ['¡buen provecho!','bon appetit!'],
                        ['¡bienvenidos! / ¡bienvenidas!','welcome!'],
                        ['salud!','cheers!']
                    ],
                    SayGoodBye: [
                        ['adiós','goodbye'],
                        ['chao','goodbye'],
                        ['hasta luego','see you later (most likely today)'],
                        ['hasta mañana','see you tomorrow'],
                        ['nos vemos','see you (informal)'],
                        ['¡cuídate mucho!','take care!'],
                        ['¡tenga un buen día!','have a nice day!'],
                        ['¡hasta luego!','see you soon!'],
                        ['¡buen viaje!','have a good trip!']
                    ]
                },
                // 是否显示答案
                showAnswer: false,
                // 选择背诵哪个单词集合
                selectedWordsListName: '',
                // 本次显示的单词和答案
                wordAndAnswer: ['', ''],
                // 所有西班牙语
                spanishList: [],
                // 选择一种西班牙语方言
                selectedSpanishIndex: -1
            },
            computed: {
                words() {
                    if (!this.selectedWordsListName) {
                        return []
                    }
                    return this.allWords[this.selectedWordsListName]
                }
            },
            created() {
                const getSpanishList = () => {
                    this.spanishList = speechSynthesis.getVoices().filter(x=>x.lang.indexOf('es')>-1).toSorted((x,y) => x.lang.localeCompare(y.lang))
                }

                // safari
                getSpanishList()

                // chrome
                if(!this.spanishList.length){
                    speechSynthesis.onvoiceschanged = getSpanishList
                }
            },
            methods: {
                getNext() {
                    if (!this.selectedWordsListName) {
                        alert('请先选择要背的单词')
                        return
                    }
                    this.wordAndAnswer = this.words[Math.floor(Math.random() * this.words.length)]
                },
                readInSpanish() {
                    const message = new SpeechSynthesisUtterance(this.wordAndAnswer[0])
                    message.lang = this.spanishList[this.selectedSpanishIndex].lang
                    message.voice = this.spanishList[this.selectedSpanishIndex]
                    speechSynthesis.speak(message)
                }
            }
        })
    </script>
</body>
</html>