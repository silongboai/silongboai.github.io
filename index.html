<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spanish</title>
    <link href="./css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div id="app" class="container text-center">
        <div class="row">
            <div class="col">
                <select class="form-select" v-model="selectedSpanishIndex">
                    <option :value="-1">--select spanish--</option>
                    <option v-for="(x, index) in spanishList" :key="index" :value="index">{{ x.lang }} - {{ x.name }}</option>
                </select>
            </div>
        </div>

        <div class="row">
            <div class="col">
                <select class="form-select" v-model="selectedWordsListName">
                    <option value="">--select words--</option>
                    <option v-for="(value, key) in allWords" :value="key">{{ key }}</option>
                </select>
            </div>
        </div>

        <div class="row">
            <div class="col">
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="cbShowAnswer" v-model="showAnswer">
                    <label class="form-check-label" for="cbShowAnswer">
                        answer
                    </label>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col">
                <div class="float-end">
                    <button type="button" class="btn btn-primary" @click="getNext">next</button>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col">
                <div class="container text-center">
                    <div class="row">
                        <div class="col-1">
                            <div v-if="wordAndAnswer[0] && showReading" class="spinner-border text-success" role="status">
                                <span class="visually-hidden">Loading...</span>
                            </div>
                        </div>
                        <div class="col">
                            <div @click="readInSpanish" class="fs-1">
                                {{ wordAndAnswer[0]}}
                            </div>
                        </div>
                    </div>
                    <div class="row" v-if="showAnswer">
                        <div class="col-1"></div>
                        <div class="col">
                            <div class="fs-1">{{ wordAndAnswer[1] }}</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="./js/vue.js"></script>
    <script>
        var app = new Vue({
            el: '#app',
            data: {
                // 所有西班牙语
                spanishList: [],
                // 选择一种西班牙语方言
                selectedSpanishIndex: -1,
                // 所有单词
                allWords: {
                    NumbersOf0To9: [['cero', 'zero'],['uno', 'one'],['dos','two'],['tres','three'],['cuatro','four'],['cinco','five'],['seis','six'],['siete','seven'],['ocho','eight'],['nueve','nine']],
                    NumbersOf10To19: [['diez','ten'],['once','eleven'],['doce','twelve'],['trece','thirteen'],['catorce','fourteen'],['quince','fifteen'],['dieciséis','sixteen'],['diecisiete','seventeen'],['dieciocho','eighteen'],['diecinueve','nineteen']],
                    NumbersOf20To29: [['veinte','twenty'],['veintiuno','21'],['veintidos','22'],['veintitrés','23'], ['veinticuatro','24'],['veinticinco','25'],['veintiseis','26'],['veintisiete','27'],['veintiocho','28'],['veintinueve','29']],
                    NumbersOf30Plush: [['treinta','thirty'],['cuarenta','forty'],['cincuenta','fifty'],['sesenta','sixty'],['setenta','seventy'],['ochenta','eighty'],['noventa','ninety'],['cien','hundred']],
                    // https://www.spanish.academy/blog/1000-most-common-spanish-words-for-beginners/
                    TheEssentials: [
                        ['sí','yes'],
                        ['no','no'],
                        ['¿entiende(s)?','do you understand?'],
                        ['no entiendo','i don’t understand'],
                        ['no (lo) sé','i don’t know'],
                        ['no tengo ni idea','i have no idea'],
                        ['no hablo español','i don’t speak spanish'],
                        ['estoy perdido(a)','i’m lost']
                    ],
                    IntroduceYourself: [
                        ['me llamo','my name is'],
                        ['mi nombre es','my name is'],
                        ['soy…','i’m…'],
                        ['¿cómo te llamas?','what is your name?'],
                        ['(yo) soy de…','i am from…']
                    ],
                    WhatIsUp: [
                        ['¿cómo está usted?','how are you? (formal)'],
                        ['¿cómo estás?','how are you? (informal)'],
                        ['¿qué tal?','how are you? (informal) / what’s up?'],
                        ['¿cómo te va?','how ‘s it going?'],
                        ['¿qué haces?','what are you doing?'],
                        ['¿qué pasa?','what ‘s happening?'],
                    ],
                    Responses: [
                        ['¿y tú?','and you?'],
                        ['muy bien','very well'],
                        ['más o menos','so so'],
                        ['así, así','so, so'],
                        ['mal','bad'],
                        ['como siempre','as always']
                    ],
                    EtiquetteWords: [
                        ['¡de nada!','you’re welcome! / no problem!'],
                        ['por favor','please'],
                        ['¡perdon!','excuse me!'],
                        ['¡disculpe!','excuse me!'],
                        ['¡lo siento!','sorry!'],
                        ['gracias','thank you'],
                        ['salud','bless you']
                    ],
                    QuestionWords: [
                        ['¿qué…?','what?'],
                        ['¿quién…?','who?'],
                        ['¿cuándo…?','when?'],
                        ['¿dónde…?','where?'],
                        ['¿por qué…?','why?'],
                        ['¿cuál?','which?'],
                        ['¿cómo…?','how?']
                    ],
                    SpanishPronouns: [
                        ['Yo','I'],
                        ['tú (informal)','you'],
                        ['usted (formal)','you'],
                        ['él','he'],
                        ['ella','she'],
                        ['nosotros/nosotras','we'],
                        ['ustedes','you all'],
                        ['ellos','they'],
                        ['ellas(females)','they']
                    ],
                    Greetings: [
                        ['hola','hello'],
                        ['buenos días','good morning'],
                        ['buenas tardes','good afternoon'],
                        ['buenas noches','good evening / good night']
                    ],
                    TalkingAboutAge: [
                        ['(yo) tengo … años','i am … years old.'],
                        ['viejo/a','old'],
                        ['joven','young'],
                        ['de mediana edad','middle-aged'],
                        ['juvenil','youthful'],
                        ['nuevo/a','new'],
                    ],
                    Celebrate: [
                        ['¡feliz cumpleaños!','happy birthday!'],
                        ['¡felicitaciones!','congratulations!'],
                        ['¡diviértete!','have fun!'],
                        ['¡buen provecho!','bon appetit!'],
                        ['¡bienvenidos! / ¡bienvenidas!','welcome!'],
                        ['salud!','cheers!']
                    ],
                    SayGoodBye: [
                        ['adiós','goodbye'],
                        ['chao','goodbye'],
                        ['hasta luego','see you later (most likely today)'],
                        ['hasta mañana','see you tomorrow'],
                        ['nos vemos','see you (informal)'],
                        ['¡cuídate mucho!','take care!'],
                        ['¡tenga un buen día!','have a nice day!'],
                        ['¡hasta luego!','see you soon!'],
                        ['¡buen viaje!','have a good trip!']
                    ],
                    // Time Words
                    DaysOfTheWeek: [
                        ['Domingo','Sunday'],
                        ['Lunes','Monday'],
                        ['Martes','Tuesday'],
                        ['Miércoles','Wednesday'],
                        ['Jueves','Thursday'],
                        ['Viernes','Friday'],
                        ['Sábado','Saturday']
                    ],
                    MonthsOfTheYear: [
                        ['Enero','January'],
                        ['Febrero','February'],
                        ['Marzo','March'],['Abril','April'],
                        ['Mayo','May'],
                        ['Junio','June'],
                        ['Julio','July'],
                        ['Agosto','August'],
                        ['Septiembre','September'],
                        ['Octubre','October'],
                        ['Noviembre','November'],
                        ['Diciembre','December']
                    ],
                    OtherTimeWords:[
                        ['anteayer','day before yesterday'],
                        ['ayer','yesterday'],
                        ['el año','year'],
                        ['el día','day'],
                        ['el mes','month'],
                        ['el siglo','century'],
                        ['la hora','hour'],
                        ['hoy','today'],
                        ['la semana','week'],
                        ['madrugada','dawn, very early in the morning'],
                        ['mañana','tomorrow'],
                        ['mañana','morning'],
                        ['medianoche','midnight'],
                        ['mediodia','noon'],
                        ['el minuto','minute'],
                        ['la noche','night'],
                        ['el pasado mañana','day after tomorrow'],
                        ['los segundos','seconds'],
                        ['la tarde','afternoon']
                    ],
                    // Family Words
                    NuclearFamily: [
                        ['el padre','father'],
                        ['el papá','dad'],
                        ['la madre','mother'],
                        ['la mamá','mom'],
                        ['el hermano','brother'],
                        ['la hermana','sister'],
                        ['el hijo','son'],
                        ['la hija','daughter'],
                        ['la familia cercana','close family']
                    ],
                    ExtendedFamily: [
                        ['el abuelo','grandfather'],
                        ['la abuela','grandmother'],
                        ['el bisabuelo','great-grandfather'],
                        ['la bisabuela','great-grandmother'],
                        ['la nieta','granddaughter'],
                        ['el nieto','grandson'],
                        ['el tío','uncle'],
                        ['la tía','aunt'],
                        ['el tío abuelo','great-uncle'],
                        ['la tía abuela','great-aunt'],
                        ['el primo','cousin (male)'],
                        ['la prima','cousin (female)'],
                        ['mis parientes','my relatives']
                    ],
                    FamilyVerbs: [
                        ['abrazar','to hug'],
                        ['amar','to love'],
                        ['reír','to laugh'],
                        ['perdonar','to forgive']
                    ],
                    ActionVerbs: [
                        ['empezar',' to start'],
                        ['seguir','to follow'],
                        ['abrir',' to open'],
                        ['buscar','to search'],
                        ['cantar','to sing'],
                        ['cerrar','to close'],
                        ['destruir','to destroy'],
                        ['dormir','to sleep'],
                        ['encontrar','to find'],
                        ['esconder','to hide'],
                        ['esperar','to wait'],
                        ['faltar','to miss'],
                        ['hacer','to do '],
                        ['intentar','to try'],
                        ['llamar','to call'],
                        ['llevar','to take'],
                        ['llorar','to cry'],
                        ['luchar','to fight'],
                        ['mentir','to lie'],
                        ['odiar','to hate'],
                        ['recibir','to receive'],
                        ['reconocer','to recognize'],
                        ['robar','to steal'],
                        ['salvar','to save'],
                        ['sonreír','to smile'],
                        ['soñar','to dream'],
                        ['tomar','to take'],
                        ['Vivir','to live']
                    ],
                    // The Five Senses
                    Sound: [
                        ['tranquilo/a','quiet'],
                        ['ruidoso/a','loud'],
                        ['gritar','to shout'],
                        ['escuchar','to hear'],
                        ['silencio','silence'],
                        ['alto','loud'],
                        ['bajo','soft'],
                        ['ensordecedor','deafening'],
                        ['agudo','sharp, high-pitched'],
                        ['grave','low-pitched'],
                        ['melodioso','melodious'],
                        ['armónico','harmonic'],
                        ['zumbido','buzz'],
                        ['sordo','deaf'],
                        ['duro de oíd','hard of hearing'],
                        ['oído fino','acute hearing'],
                        ['problemas de audición','hearing-impaired'],
                        ['fuera de alcance',' out of earshot']
                    ],
                    Sight: [
                        ['ver','to see'],
                        ['mirar','to look'],
                        ['de colores','colorful'],
                        ['blanco y negro','black and white'],
                        ['brillante','bright'],
                        ['apagado','dim'],
                        ['claro','light'],
                        ['oscuro','dark'],
                        ['ciego','blind'],
                        ['mirar fijamente','to stare'],
                        ['echar un vistazo','to glance'],
                        ['bizquear','to squint'],
                        ['guiñar','to wink'],
                        ['parpadear','to blink']
                    ],
                    Touch: [
                        ['tocar','to touch'],
                        ['agarrar','to grab'],
                        ['suave','soft'],
                        ['áspero(a)','rough'],
                        ['liso(a)','smooth'],
                        ['rugoso(a)','wrinkled'],
                        ['pegajoso(a)','sticky'],
                        ['punzante','sharp'],
                        ['sedoso(a)','silky'],
                        ['esponjoso(a)','spongy'],
                        ['mullido(a)','fluffy'],
                        ['hormigueo','tingle'],
                        ['entumecido(a)','numb'],
                        ['rozar','to touch gently'],
                        ['acariciar','to caress'],
                        ['agarrar','to grab']
                    ],
                    Smell: [
                        ['olor','smell'],
                        ['el perfume','scent'],
                        ['la fragancia','fragrance'],
                        ['el hedor','stench'],
                        ['apestoso(a)','smelly'],
                        ['fresco(a) ','fresh'],
                        ['acre','pungent'],
                        ['húmedo(a)','musty'],
                        ['podrido(a)','rotten'],
                        ['ahumado(a)','smoky'],
                        ['apestar','to stink']
                    ],
                    Taste: [
                        ['gusto','taste'],
                        ['sabor','flavor'],
                        ['probar','try'],
                        ['sabroso ','está sabrosa'],
                        ['delicioso',' delicious '],
                        ['perfecto ',' perfect'],
                        ['apetitoso ','appetizing'],
                        ['dulce ','sweet'],
                        ['dulzón',' sugary '],
                        ['soso ','bland']
                    ],
                    // Describing Words
                    Distance: [
                        ['abierto/a','open'],
                        ['ancho/a','wide'],
                        ['estrecho/a','narrow'],
                        ['lejano/a','far'],
                        ['cercano/a','close']
                    ],
                    PersonalityAndEmotions: [
                        ['alegre','joyful'],
                        ['gracioso/a','funny, amusing'],
                        ['serio/a','serious'],
                        ['tímido/a','shy'],
                        ['valiente','brave'],
                        ['loco/a','crazy'],
                        ['contento(a)','content'],
                        ['feliz','happy'],
                        ['preocupado(a)','worried'],
                        ['nervioso(a)','nervous'],
                        ['tranquilo(a)','tranquil'],
                        ['calmado(a)','calm'],
                        ['emocionado(a)','excited']
                    ],
                    // Physical Adjectives
                    Hair: [
                        ['largo/a','long'],
                        ['corto/a','short'],
                        ['liso/a','straight'],
                        ['rizado/a','curly'],
                        ['ondulado/a','wavy'],
                        ['castaño/a','brown'],
                        ['rubio/a','blonde'],
                        ['pelirrojo/a','red'],
                        ['negro/a','black'],
                        ['canoso/a','grey'],
                        ['abundante','thick'],
                        ['fino/a','thin'],
                        ['escalado/a','layered'],
                        ['teñido/a','dyed'],
                        ['saludable','healthy'],
                        ['claro/a','light'],
                        ['encrespado/a','frizzy'],
                        ['brillante','shiny'],
                        ['calvo/a','bald'],
                    ],
                    Size: [
                        ['grande','big'],
                        ['pequeño/a','small'],
                        ['enorme','huge'],
                        ['delgado/a','lean'],
                        ['esbelto/a','slender'],
                        ['flaco/a','skinny'],
                        ['menudo/a','petite'],
                        ['alto/a','tall'],
                        ['bajo/a','short'],
                    ],
                    Looks: [
                        ['hermoso/a','beautiful'],
                        ['guapo/a','handsome'],
                        ['feo/a','ugly'],
                        ['adorable','cute'],
                        ['bonita','pretty'],
                        ['impresionante','stunning'],
                        ['poco atractivo/a','plain'],
                        ['promedio/a','average'],
                        ['atractivo/a','attractive']
                    ],
                    Colors: [
                        ['café','brown'],
                        ['celeste','sky blue'],
                        ['negro','black'],
                        ['marrón / café','brown'],
                        ['gris','grey'],
                        ['blanco','white'],
                        ['amarillo','yellow'],
                        ['anaranjado','orange'],
                        ['rojo','red'],
                        ['rosado','pink'],
                        ['morado / púrpura','purple'],
                        ['azul','blue'],
                        ['verde','green'],
                    ],
                    ArtsAndCrafts: [
                        ['colorear','to color'],
                        ['construir','to construct'],
                        ['cortar','to cut'],
                        ['coser','to sew'],
                        ['dibujar','to draw'],
                        ['pintar','to paint']
                    ],
                    // Numbers
                    // Animals
                    FarmAnimals: [
                        ['el gato','cat'],
                        ['el perro','dog'],
                        ['el conejo','rabbit'],
                        ['el pollo','chicken'],
                        ['la gallina','hen'],
                        ['el gallo','rooster'],
                        ['la vaca','cow'],
                        ['el toro','bull'],
                        ['la oveja','sheep'],
                        ['el caballo','horse'],
                        ['el cerdo','pig'],
                        ['la cabra','goat'],
                        ['el burro','donkey'],
                        ['el ratón','mouse']
                    ],
                    ForestAnimals: [
                        ['el ciervo','deer'],
                        ['el mapache','raccoon'],
                        ['la ardilla -','squirrel'],
                        ['el búho','owl'],
                        ['el zorro','fox'],
                        ['el lobo','wolf'],
                        ['el oso','bear'],
                    ],
                    OceanAnimals: [
                        ['el cangrejo','crab'],
                        ['la medusa','jellyfish'],
                        ['el delfín','dolphin'],
                        ['la ballena','whale'],
                        ['el tiburón','shark'],
                        ['la foca','seal'],
                        ['el lobo marino','sea lion'],
                        ['la morsa','walrus'],
                        ['el pingüino','penguin'],
                    ]
                },
                // 选择背诵哪个单词集合
                selectedWordsListName: '',
                // 是否显示答案
                showAnswer: false,
                // 本次显示的单词和答案
                wordAndAnswer: ['', ''],
                // 显示朗读中
                showReading: false
            },
            computed: {
                words() {
                    if (!this.selectedWordsListName) {
                        return []
                    }
                    return this.allWords[this.selectedWordsListName]
                }
            },
            created() {
                const getSpanishList = () => {
                    this.spanishList = speechSynthesis.getVoices().filter(x=>x.lang.indexOf('es')>-1).toSorted((x,y) => x.lang.localeCompare(y.lang))
                }

                // safari
                getSpanishList()

                // chrome
                if(!this.spanishList.length){
                    speechSynthesis.onvoiceschanged = getSpanishList
                }
            },
            methods: {
                getNext() {
                    if (!this.selectedWordsListName) {
                        alert('请先选择要背的单词')
                        return
                    }
                    this.wordAndAnswer = this.words[Math.floor(Math.random() * this.words.length)]
                },
                readInSpanish() {
                    this.showReading = true
                    const message = new SpeechSynthesisUtterance(this.wordAndAnswer[0])
                    message.lang = this.spanishList[this.selectedSpanishIndex].lang
                    message.voice = this.spanishList[this.selectedSpanishIndex]
                    speechSynthesis.speak(message)
                    setTimeout(() => {
                        this.showReading = false
                    }, 1000)
                }
            }
        })
    </script>
</body>
</html>